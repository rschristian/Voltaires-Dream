#Brandenburgian missions (And Nordmark!)
#By Isildur

vn_bra_missions_slot_1_a = {
    slot = 6
    generic = no
    ai = yes
    potential = {
		OR = {
			tag = BRA
			AND = {
				tag = SDL
				NOT = { started_in = 1147.8.1 }
			}
		}
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_bra_berlin_and_colln = {
        icon = mission_pol_develop_countryside
		required_missions = {  }
		provinces_to_highlight = {
			province_id = 2652
		}
        trigger = {
            2652 = {
				owned_by = ROOT
				is_core = ROOT
				development = 20
				has_fort_building_trigger = yes
			}
        }
        effect = {
			2652 = {
				move_capital_effect = yes
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
				add_province_modifier = {
					name = "bra_berlin_and_colln_mission"
					duration = -1
				}
			}
        }
    }
    vn_bra_fortify_mark = {
        icon = mission_castle_construction
        required_missions = { vn_bra_berlin_and_colln }
		provinces_to_highlight = {
			region = brandenburg_region
			owned_by = ROOT
			has_fort_building_trigger = no
		}
        trigger = {
            num_of_owned_provinces_with = {
				value = 5
				region = brandenburg_region
				has_fort_building_trigger = yes
			}
        }
        effect = {
			add_mil_power = 50
            add_country_modifier = {
				name = "bra_fortify_mark_mission"
				duration = 9125
			}
        }
	}
}

vn_bra_missions_slot_1_b = {
    slot = 6
    generic = no
    ai = yes
    potential = {
        OR = {
			tag = BRA
			AND = {
				tag = BRA
				was_tag = SDL
			}
		}
        NOT = { map_setup = map_setup_random }
    }
	has_country_shield = yes
	
    vn_bra_annex_lebus = {
        icon = mission_village
        position = 3
		required_missions = { vn_bra_beyond_havel }
		provinces_to_highlight = {
			OR = {
				province_id = 50
				province_id = 839
				province_id = 242
				province_id = 2197
				province_id = 2650
				province_id = 3205
				province_id = 4917
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
        trigger = {
			50 = { country_or_non_sovereign_subject_holds = ROOT }
			839 = { country_or_non_sovereign_subject_holds = ROOT }
			242 = { country_or_non_sovereign_subject_holds = ROOT }
			2197 = { country_or_non_sovereign_subject_holds = ROOT }
			2650 = { country_or_non_sovereign_subject_holds = ROOT }
			3205 = { country_or_non_sovereign_subject_holds = ROOT }
			4917 = { country_or_non_sovereign_subject_holds = ROOT }
        }
        effect = {
			if = {
				limit = { NOT = { exists = TFW } }
				country_event = { id = vn_flavor_bra.100 }
			}
			else = {
				2197 = {
					add_local_autonomy = -100
					add_base_tax = 2
				}
				242 = {
					add_local_autonomy = -100
					add_base_tax = 2
				}
			}
			custom_tooltip = " "
            lusatia_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			custom_tooltip = " "
			add_country_modifier = {
				name = bra_annex_lebus_mission
				duration = 9125
			}
        }
		ai_weight = {
			factor = 500
		}
    }
    vn_bra_conquer_lausitz = {
        icon = mission_pol_tend_east
        required_missions = { vn_bra_annex_lebus }
        provinces_to_highlight = {
			region = lusatia_region
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
        trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 10
				region = lusatia_region
			}
        }
        effect = {
			if = {
				limit = { has_dlc = "Lions of the North" }
				unlock_estate_privilege = {
					estate_privilege = estate_burghers_forest_expansion
				}
			}
			else = {
				add_adm_power = 100
			}
			custom_tooltip = " "
			add_accepted_culture_or_dip_power = {
				culture = sorbian
				dip_reward = yes
			}
		}
	}
}

vn_bra_missions_slot_1_c = {
    slot = 6
    generic = no
    ai = yes
    potential = {
        OR = {
			tag = BRA
			AND = {
				tag = BRA
				was_tag = SDL
			}
		}
        NOT = { map_setup = map_setup_random }
    }
	has_country_shield = yes
	
    vn_bra_brandenburg_navy = {
        icon = mission_exploration
        position = 5
        required_missions = { vn_bra_reach_baltic }
        trigger = {
            naval_forcelimit = 20
			calc_true_if = {
				num_of_heavy_ship = 3
				num_of_galley = 5
				num_of_light_ship = 5
				num_of_transport = 10
				amount = 3
			}
        }
        effect = {
			add_navy_tradition = 10
			add_country_modifier = {
				name = "bra_brandenburg_navy_mission"
				duration = 9125
			}
        }
    }
    vn_bra_baltic_entrepots = {
        icon = mission_pol_embellish_gdansk
        required_missions = { vn_bra_brandenburg_navy }
        provinces_to_highlight = {
			OR = {
				province_id = 2652
				province_id = 402
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_strongest_trade_power = ROOT }
			}
		}
		trigger = {
			owns = 2652
			owns = 402
            2652 = {
				is_strongest_trade_power = ROOT
			}
			402 = {
				is_strongest_trade_power = ROOT
			}
        }
        effect = {
			add_years_of_trade_income = {
				years = 2
				custom_tooltip = zim_dominate_upstream_trade_ct
			}
			custom_tooltip = " "
			if = {
				limit = {
					has_dlc = "Dharma"
					2652 = {
						NOT = { province_has_center_of_trade_of_level = 3 }
					}
				}
				2652 = {
					add_center_of_trade_level = 1
					add_base_production = 1
				}
			}
			else = {
				2652 = {
					add_base_production = 2
				}
			}
			if = {
				limit = {
					has_dlc = "Dharma"
					402 = {
						NOT = { province_has_center_of_trade_of_level = 3 }
					}
				}
				402 = {
					add_center_of_trade_level = 1
					add_base_production = 1
				}
			}
			else = {
				402 = {
					add_base_production = 2
				}
			}
        }
    }
    vn_bra_trade_with_hansa = {
        icon = unite_the_league
		required_missions = { vn_bra_baltic_entrepots }
		provinces_to_highlight = {
			province_id = 13
		}
        trigger = {
			13 = {
				OR = {
					country_or_non_sovereign_subject_holds = ROOT 
					owner = {
						alliance_with = ROOT 
						has_opinion = {
							who = ROOT 
							value = 175 
						}
					}
					trade_share = {
						country = ROOT 
						share = 30
					}
				}
			}
        }
        effect = {
			custom_tooltip = vn_bra_trade_with_hansa.tt
			hidden_effect = {
				every_owned_province = {
					limit = { has_province_modifier = hanseatic_city }
					owner = { add_mercantilism_or_monarch_power = { amount = 1 } }
				}
			}
			custom_tooltip = " "
            add_country_modifier = {
				name = "bra_trade_with_hansa_mission"
				duration = 18250
			}
        }
	}
}

vn_bra_missions_slot_2_a = {
    slot = 7
    generic = no
    ai = yes
    potential = {
		OR = {
			tag = BRA
			AND = {
				tag = SDL
				NOT = { started_in = 1147.8.1 }
			}
		}
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_bra_beyond_havel = {
		icon = mission_advance_to_the_dnieper
        position = 2
		required_missions = { vn_bra_ostsiedlung }
		provinces_to_highlight = {
			OR = {
				# province_id = 746
				# province_id = 3209
				# province_id = 233
				# province_id = 2934
				# province_id = 241
				# province_id = 2933
				# province_id = 2634
				# province_id = 2652
				# province_id = 2640
				# province_id = 3214
				# province_id = 3213
				# province_id = 3212
				area = potsdam_area
				area = ruppin_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
        trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 10
				OR = {
					area = potsdam_area
					area = ruppin_area
				}
				# OR = {
				# 	province_id = 746
				# 	province_id = 3209
				# 	province_id = 233
				# 	province_id = 2934
				# 	province_id = 241
				# 	province_id = 2933
				# 	province_id = 2634
				# 	province_id = 2652
				# 	province_id = 2640
				# 	province_id = 3214
				# 	province_id = 3213
				# 	province_id = 3212
				# }
			}
		# 	746 = { country_or_non_sovereign_subject_holds = ROOT }
		# 	3209 = { country_or_non_sovereign_subject_holds = ROOT }
		# 	233 = { country_or_non_sovereign_subject_holds = ROOT }
		# 	2934 = { country_or_non_sovereign_subject_holds = ROOT }
		# 	241 = { country_or_non_sovereign_subject_holds = ROOT }
		# 	2933 = { country_or_non_sovereign_subject_holds = ROOT }
		# 	2634 = { country_or_non_sovereign_subject_holds = ROOT }
		# 	2652 = { country_or_non_sovereign_subject_holds = ROOT }
		# 	2640 = { country_or_non_sovereign_subject_holds = ROOT }
		# 	3214 = { country_or_non_sovereign_subject_holds = ROOT }
		# 	3213 = { country_or_non_sovereign_subject_holds = ROOT }
		# 	3212 = { country_or_non_sovereign_subject_holds = ROOT }
		# 
		}
        effect = {
			add_adm_power = 100
			berlin_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			neumark_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			4804 = {
				if = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			#845 = {
			#	if = {
			#		limit = {
			#			NOT = { is_permanent_claim = ROOT }
			#			NOT = { is_core = ROOT }
			#		}
			#		add_permanent_claim = ROOT
			#	}
			#}
			#234 = {
			#	if = {
			#		limit = {
			#			NOT = { is_permanent_claim = ROOT }
			#			NOT = { is_core = ROOT }
			#		}
			#		add_permanent_claim = ROOT
			#	}
			#}
			#3207 = {
			#	if = {
			#		limit = {
			#			NOT = { is_permanent_claim = ROOT }
			#			NOT = { is_core = ROOT }
			#		}
			#		add_permanent_claim = ROOT
			#	}
			#}
			#239 = {
			#	if = {
			#		limit = {
			#			NOT = { is_permanent_claim = ROOT }
			#			NOT = { is_core = ROOT }
			#		}
			#		add_permanent_claim = ROOT
			#	}
			#}
			3211 = {
				if = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			2650 = {
				if = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			3205 = {
				if = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			4917 = {
				if = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			add_country_modifier = {
				name = "bra_beyond_havel_mission"
				duration = 9125
			}
        }
		ai_weight = {
			factor = 500
		}
	}
}

vn_bra_missions_slot_2_b = {
    slot = 7
    generic = no
    ai = yes
    potential = {
		OR = {
			tag = BRA
			AND = {
				tag = BRA
				was_tag = SDL
			}
		}
        NOT = { map_setup = map_setup_random }
    }
	has_country_shield = yes
	
    vn_bra_annex_uckermark = {
		icon = mission_lit_harness_steppes
		position = 3
		required_missions = { vn_bra_beyond_havel }
		provinces_to_highlight = {
			OR = {
				province_id = 4804
				province_id = 2666
				province_id = 843
				province_id = 3213
				province_id = 3214
				province_id = 3212
				province_id = 2662
				province_id = 2417
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
        trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 6
				OR = {
					province_id = 4804
					province_id = 2666
					province_id = 843
					province_id = 3213
					province_id = 3214
					province_id = 3212
					province_id = 2662
					province_id = 2417
				}
			}
        }
        effect = {
			kolberg_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			pomerania_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
            }
			custom_tooltip = " "
			add_country_modifier = {
				name = bra_annex_uckermark_mission
				duration = 9125
			}
        }
		ai_weight = {
			factor = 500
		}
    }
    vn_bra_reach_baltic = {
        icon = mission_the_gryf
		required_missions = { 
			vn_bra_annex_uckermark 
			vn_bra_conquer_neumark
		}
		provinces_to_highlight = {
			OR = {
				area = kolberg_area
				area = pomerania_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			has_port = yes
		}
        trigger = {
            num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 5
				OR = {
					area = kolberg_area
					area = pomerania_area
				}
				has_port = yes
			}
        }
        effect = {
            stolp_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			custom_tooltip = " "
			custom_tooltip = lit_every_province_that_fulfills_req_tt
			tooltip = {
				add_province_modifier = {
					name = "bra_reach_baltic_mission"
					duration = 9125
				}
			}
			hidden_effect = {
				kolberg_area = {
					limit = {
						country_or_non_sovereign_subject_holds = ROOT
						has_port = yes
					}
					add_province_modifier = {
						name = "bra_reach_baltic_mission"
						duration = 9125
					}
				}
				pomerania_area = {
					limit = {
						country_or_non_sovereign_subject_holds = ROOT
						has_port = yes
					}
					add_province_modifier = {
						name = "bra_reach_baltic_mission"
						duration = 9125
					}
				}
			}
        }
    }
    vn_bra_schlawe_and_stolp = {
		icon = mission_expand_into_the_forest
		required_missions = { vn_bra_reach_baltic }
		provinces_to_highlight = {
			area = stolp_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
        trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 6
				area = stolp_area
			}
        }
        effect = {
			westpreussennorth_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			westpreussensouth_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			add_country_modifier = {
				name = bra_schlawe_and_stolp_mission
				duration = 9125
			}
        }
    }
	vn_bra_subjugate_pomerelia = {
        icon = mission_danzig_or_war
		required_missions = { vn_bra_schlawe_and_stolp }
		provinces_to_highlight = {
			OR = {
				area = westpreussennorth_area
				area = westpreussensouth_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
        trigger = {
			402 = { country_or_non_sovereign_subject_holds = ROOT }
            num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 15
				OR = {
					area = westpreussennorth_area
					area = westpreussensouth_area
				}
			}
        }
        effect = {
			add_prestige_or_monarch_power = { amount = 10 }
			kulmerland_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
            }
            warmia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			konigsberg_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			ostpreusseneast_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			memel_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
            }
			402 = {
				add_province_modifier = {
					name = "bra_subjugate_pomerelia_mission"
					duration = 18250
				}
			}
        }
    }
    vn_bra_brandenburg_prussia = {
        icon = develop_konigsberg
		required_missions = { 
			vn_bra_subjugate_pomerelia
			vn_bra_baltic_entrepots
		}
		provinces_to_highlight = {
			OR = {
				area = kulmerland_area
				area = warmia_area
				area = konigsberg_area
				area = ostpreusseneast_area
				area = memel_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
        trigger = {
			4854 = { country_or_non_sovereign_subject_holds = ROOT }
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 30
				OR = {
					area = kulmerland_area
					area = warmia_area
					area = konigsberg_area
					area = ostpreusseneast_area
					area = memel_area
				}
			}
        }
        effect = {
			add_power_projection = {
				type = mission_rewards_power_projection
				amount = 20
			}
			custom_tooltip = " "
			4854 = {
				add_province_modifier = {
					name = "bra_brandenburg_prussia_mission"
					duration = 9125
				}
			}
			add_country_modifier = {
				name = "bra_brandenburg_prussia_mission2"
				duration = 9125
			}
        }
	}
}

vn_bra_missions_slot_3_a = {
    slot = 8
    generic = no
    ai = yes
    potential = {
		OR = {
			tag = BRA
			AND = {
				tag = SDL
				NOT = { started_in = 1147.8.1 }
			}
		}
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_bra_ostsiedlung = {
		icon = claim_the_borderlands
        position = 1
        required_missions = {  }
		provinces_to_highlight = {
			region = brandenburg_region
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { culture = central_margravian }
			}
		}
        trigger = {
			religion_group = christian
			primary_culture = central_margravian
			army_size_percentage = 0.75
			OR = {
				mil_tech = 5
				brandenburg_region = {
					owned_by = ROOT
					culture = central_margravian
				}
			}
		}
        effect = {
			add_army_professionalism = 0.025
			add_army_tradition_or_mil_power = {
				amount = 10
			}
			custom_tooltip = " "
			ruppin_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			potsdam_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			custom_tooltip = " "
			complex_dynamic_effect = {
				first_custom_tooltip = vn_bra_ostsiedlung.tt
				first_limit = "
					NOT = { mil_tech = 5 }
				"
				first_effect = "
					add_mil_tech = 1
				"
			}
        }
		ai_weight = {
			factor = 500
		}
    }
}

vn_bra_missions_slot_3_b = {
    slot = 8
    generic = no
    ai = yes
    potential = {
        OR = {
			tag = BRA
			AND = {
				tag = BRA
				was_tag = SDL
			}
		}
        NOT = { map_setup = map_setup_random }
    }
	has_country_shield = yes
	
    vn_bra_conquer_neumark = {
        icon = mission_southern_frontier_lotn
        position = 3
		required_missions = { vn_bra_beyond_havel }
		provinces_to_highlight = {
			area = neumark_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
        trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
                value = 6
                area = neumark_area
            }
        }
        effect = {
			add_mil_power = 100
			custom_tooltip = " "
			add_yearly_manpower = 1
            # 2783 = {
			# 	if = {
			# 		limit = {
			# 			NOT = { is_permanent_claim = ROOT }
			# 			NOT = { is_core = ROOT }
			# 		}
			# 		add_permanent_claim = ROOT
			# 	}
			# }
			# 5250 = {
			# 	if = {
			# 		limit = {
			# 			NOT = { is_permanent_claim = ROOT }
			# 			NOT = { is_core = ROOT }
			# 		}
			# 		add_permanent_claim = ROOT
			# 	}
			# }
        }
		ai_weight = {
			factor = 500
		}
    }
    vn_bra_eastern_frontier = {
		icon = ansbach_succession
		required_missions = { vn_bra_conquer_neumark }
		provinces_to_highlight = {
			# OR = {
			# 	province_id = 2783
			# 	province_id = 3210
			# 	province_id = 4809
			# 	province_id = 5250
			# }
			area = neumark_area
			OR = {
				NOT = { country_or_non_sovereign_subject_holds = ROOT }
				has_fort_building_trigger = no
				NOT = { base_manpower = 3 }
			}
		}
        trigger = {
			# 2783 = { country_or_non_sovereign_subject_holds = ROOT }
			# 3210 = { country_or_non_sovereign_subject_holds = ROOT }
			# 4809 = { country_or_non_sovereign_subject_holds = ROOT }
			# 5250 = { country_or_non_sovereign_subject_holds = ROOT }
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 3
				area = neumark_area
				has_manpower_building_trigger = yes
				base_manpower = 5
			}
        }
        effect = {
			silesia_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
            }
			custom_tooltip = " "
			custom_tooltip = lit_every_province_that_fulfills_req_tt
            tooltip = {
                add_province_modifier = {
					name = "bra_eastern_frontier_mission"
					duration = 9125
				}
            }
            hidden_effect = {
                neumark_area = {
					limit = {
						country_or_non_sovereign_subject_holds = ROOT
						has_manpower_building_trigger = yes
						base_manpower = 5
					}
					add_province_modifier = {
						name = "bra_eastern_frontier_mission"
						duration = 9125
					}
				}
            }
        }
    }
    vn_bra_into_silesia = {
        icon = take_silesia
		required_missions = { vn_bra_eastern_frontier }
		provinces_to_highlight = {
			region = silesia_region
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
        trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
                value = 40
                region = silesia_region
            }
        }
        effect = {
			add_estate_burghers_loyalty_effect = yes
			custom_tooltip = " "
			czarnkow_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_claim = ROOT }
				}
				add_claim = ROOT
            }
			custom_tooltip = " "
			silesia_region = {
				limit = { country_or_non_sovereign_subject_holds = ROOT }
				add_province_modifier = {
					name = "bra_into_silesia_mission"
					duration = 9125
				}
			}
        }
	}
	vn_bra_germanize_silesia = {
		icon = mission_plc_cultural_flowering
		required_missions = { 
			vn_bra_into_silesia 
			vn_bra_send_german_colonists
		}
		provinces_to_highlight = {
			region = silesia_region
			OR = {
                NOT = { owned_by = ROOT }
				NOT = { religion_group = ROOT }
				NOT = { culture_group = ROOT }
            }
		}
        trigger = {
			num_of_owned_provinces_with = {
				value = 40
				region = silesia_region
				religion_group = ROOT
				culture_group = ROOT
			}
        }
        effect = {
			add_dip_power = 50
            silesia_region = {
				limit = {
					owned_by = ROOT
					religion_group = ROOT
					culture_group = ROOT
				}
				add_province_modifier = {
					name = "bra_assimilate_slavs_mission"
					duration = 9125
				}
			}
			add_country_modifier = {
				name = bra_germanize_silesia_mission
				duration = -1
			}
        }
	}
}

vn_bra_missions_slot_3_c = {
    slot = 8
    generic = no
    ai = yes
    potential = {
        OR = {
			tag = BRA
			AND = {
				tag = BRA
				was_tag = SDL
			}
		}
        NOT = { map_setup = map_setup_random }
    }
	has_country_shield = yes
	
    vn_bra_unite_prussia = {
        icon = an_army_with_a_state
		required_missions = { 
			vn_bra_brandenburg_prussia 
			vn_bra_duchy_of_cleves 
		}
		position = 8
		provinces_to_highlight = {
			OR = {
				area = westpreussennorth_area
				area = westpreussensouth_area
				area = memel_area
				area = ostpreusseneast_area
				area = warmia_area
				area = konigsberg_area
				area = kulmerland_area
			}
			OR = {
                NOT = { owned_by = ROOT }
                NOT = { is_core = ROOT }
            }
		}
        trigger = {
			westpreussennorth_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			westpreussensouth_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			memel_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			ostpreusseneast_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			warmia_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			konigsberg_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			kulmerland_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
        }
        effect = {
			override_country_name = BRANDENBURG_PRUSSIA_NAME
			set_country_flag = has_overriden_name_flag
			custom_tooltip = " "
			custom_tooltip = allow_earlier_prussia_formation_tt
			hidden_effect = { set_country_flag = can_form_prussia_earlier }
			custom_tooltip = " "
			add_prestige_or_monarch_power = { amount = 50 } 
			custom_tooltip = " "
			gniezno_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			posen_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			czarnkow_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			2761 = {
				if = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			5247 = {
				if = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			5905 = {
				if = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			2756 = {
				if = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			2768 = {
				if = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
        }
	}
}

vn_bra_missions_slot_4_a = {
    slot = 9
    generic = no
    ai = yes
    potential = {
		OR = {
			tag = BRA
			AND = {
				tag = SDL
				NOT = { started_in = 1147.8.1 }
			}
		}
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_bra_electorate = {
		icon = electorate_of_brandenburg
		position = 1
        required_missions = {  }
		provinces_to_highlight = {
			is_capital = yes
			owner = {
				is_emperor = yes
				NOT = { tag = ROOT }
			}
		}
        trigger = {
			if = {
				limit = { hre_size = 1 }
				OR = {
					is_emperor = yes
					AND = {
						is_elector = yes
						reverse_has_opinion = {
							who = emperor
							value = 100
						}
					}
					AND = {
						emperor = {
							trust = {
								who = ROOT
								value = 70
							}
						}
						reverse_has_opinion = {
							who = emperor
							value = 190
						}
					}
				}
			}
			else = {
				government_rank = 4
				stability = 2
			}
        }
        effect = {
			if = {
				limit = { hre_size = 1 }
				simple_dynamic_effect_without_alternative = {
					first_custom_tooltip = vn_bra_electorate.tt
					first_limit = "
						is_emperor = yes
					"
					first_effect = "
						add_imperial_influence = 25
						add_country_modifier = {
							name = bra_electorate_mission2
							duration = 9125
						}
					"
					second_custom_tooltip = vn_bra_electorate.tt2
					second_limit = "
						is_elector = yes
					"
					second_effect = "
						add_prestige_or_monarch_power = { amount = 20 } 
						add_country_modifier = {
							name = bra_electorate_mission
							duration = 9125
						}
					"
				}
			}
			add_dip_power = 50
			define_advisor = {
				type = diplomat
				skill = 2
				cost_multiplier = 0.5
			}  
        }
		ai_weight = {
			factor = 500
		}
	}
}

vn_bra_missions_slot_4_b = {
    slot = 9
    generic = no
    ai = yes
    potential = {
        OR = {
			tag = BRA
			AND = {
				tag = SDL
				NOT = { started_in = 1147.8.1 }
			}
		}
        NOT = { map_setup = map_setup_random }
    }
	has_country_shield = yes
	
    vn_bra_wendish_crusade = {	#already complete when BRA forms
		icon = mission_teutonic_lancer
		position = 2
        required_missions = { vn_bra_ostsiedlung }
		provinces_to_highlight = {
			if = {
				limit = {
					any_country = {
						NOT = { tag = ROOT }
						capital_scope = {
							superregion = germanynorth_superregion
						}
						culture = polabian
						religion = slavic_pagan
					}
				}
				is_capital = yes
				owner = {
					NOT = { tag = ROOT }
					capital_scope = {
						superregion = germanynorth_superregion
					}
					culture = polabian
					religion = slavic_pagan
				}
			}
			else = {
				region = brandenburg_region
				NOT = { owned_by = ROOT }
			}
		}
        trigger = {
			NOT = { current_age = age_of_empire }
			if = {
				limit = {
					any_country = {
						NOT = { tag = ROOT }
						capital_scope = {
							superregion = germanynorth_superregion
						}
						culture = polabian
						religion = slavic_pagan
					}
				}
				custom_trigger_tooltip = {
					tooltip = vn_bra_wendish_crusade.tt
					any_country = {
						culture = polabian
						religion = slavic_pagan
						NOT = { tag = ROOT }
						capital_scope = {
							superregion = germanynorth_superregion
						}
						ROOT = {
							has_won_war_against = {
								who = PREV
								max_years_since = 20
							}
						}
					}
				}
			}
			else = {
				num_of_owned_provinces_with = {
					value = 12
					region = brandenburg_region
				}
			}
        }
        effect = {
			create_general = { tradition = 75 }
			custom_tooltip = " "
            add_country_modifier = {
				name = "bra_wendish_crusade_mission"
				duration = 9125
			}
			if = { 
				limit = { 
					has_dlc = "Domination" 
					hre_size = 1 
					is_part_of_hre = yes 
				}
				custom_tooltip = pru_adding_provs_in_empire_tt
				
				custom_tooltip = pru_if_non_emp_and_ally_tt
				
				custom_tooltip = pru_if_non_emp_and_no_ally_tt
				
				custom_tooltip = pru_if_emperor_tt
				
				hidden_effect = { 
					set_country_flag = pru_dom_hre_flag
				}
			}
        }
		ai_weight = {
			factor = 500
		}
	}
}

vn_bra_missions_slot_4_c = {
    slot = 9
    generic = no
    ai = yes
    potential = {
        OR = {
			tag = BRA
			AND = {
				tag = BRA
				was_tag = SDL
			}
		}
        NOT = { map_setup = map_setup_random }
    }
	has_country_shield = yes

    vn_bra_assimilate_slavs = {
        icon = mission_pol_tend_east
		required_missions = { vn_bra_wendish_crusade }
		position = 3
		provinces_to_highlight = {
			region = brandenburg_region
			OR = {
                NOT = { religion_group = ROOT }
                NOT = { culture_group = ROOT }
            }
		}
        trigger = {
			num_of_owned_provinces_with = {
				value = 20
				region = brandenburg_region
				religion_group = ROOT
				culture_group = ROOT
			}
        }
        effect = {
			add_dip_power = 50
            brandenburg_region = {
				limit = { owned_by = ROOT }
				add_province_modifier = {
					name = "bra_assimilate_slavs_mission"
					duration = 9125
				}
			}
        }
	}
}

vn_bra_missions_slot_4_d = {
    slot = 9
    generic = no
    ai = yes
    potential = {
        OR = {
			tag = BRA
			AND = {
				tag = BRA
				was_tag = SDL
			}
		}
        NOT = { map_setup = map_setup_random }
    }
	has_country_shield = yes

    vn_bra_send_german_colonists = {
		icon = mission_swedish_peasantry
		position = 5
        required_missions = { 
			vn_bra_eastern_frontier 
			vn_bra_assimilate_slavs 
		}
		provinces_to_highlight = {
			region = hinterpommern_region
			OR = {
                NOT = { owned_by = ROOT }
				NOT = { religion_group = ROOT }
				NOT = { culture_group = ROOT }
            }
		}
        trigger = {
			num_of_owned_provinces_with = {
				value = 20
				region = hinterpommern_region
				religion_group = ROOT
				culture_group = ROOT
			}
        }
        effect = {
			add_dip_power = 50
            hinterpommern_region = {
				limit = { owned_by = ROOT }
				add_province_modifier = {
					name = "bra_assimilate_slavs_mission"
					duration = 9125
				}
			}
        }
    }
}

vn_bra_missions_slot_4_e = {
    slot = 9
    generic = no
    ai = yes
    potential = {
        OR = {
			tag = BRA
			AND = {
				tag = BRA
				was_tag = SDL
			}
		}
        NOT = { map_setup = map_setup_random }
    }
	has_country_shield = yes
	
	vn_bra_claims_in_magdeburg = {
        icon = mission_lit_reform_magdeburg_laws
        position = 6
		required_missions = { }
		provinces_to_highlight = {
			OR = {
				province_id = 2636
				province_id = 2631
				province_id = 589
				province_id = 1861
				province_id = 2442
				province_id = 2935
				province_id = 2649
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
        trigger = {
			2636 = { country_or_non_sovereign_subject_holds = ROOT }
			2631 = { country_or_non_sovereign_subject_holds = ROOT }
			589 = { country_or_non_sovereign_subject_holds = ROOT }
			1861 = { country_or_non_sovereign_subject_holds = ROOT }
			2442 = { country_or_non_sovereign_subject_holds = ROOT }
			2935 = { country_or_non_sovereign_subject_holds = ROOT }
			2649 = { country_or_non_sovereign_subject_holds = ROOT }
        }
        effect = {
			2636 = {
				add_or_upgrade_tax_building = yes
			}
			custom_tooltip = " "
			if = {
				limit = {
					exists = KLE
					valid_for_personal_unions_trigger = yes
					KLE = {
						valid_for_personal_unions_trigger = yes
					}
				}
				add_casus_belli = {
					type = cb_fabricated_claims
					months = 300
					target = KLE
				}
			}
			else = {
				2501 = {
					if = {
						limit = {
							NOT = { is_core = ROOT }
							NOT = { is_permanent_claim = ROOT }
						}
						add_permanent_claim = ROOT
					}
				}
				162 = {
					if = {
						limit = {
							NOT = { is_core = ROOT }
							NOT = { is_permanent_claim = ROOT }
						}
						add_permanent_claim = ROOT
					}
				}
				4110 = {
					if = {
						limit = {
							NOT = { is_core = ROOT }
							NOT = { is_permanent_claim = ROOT }
						}
						add_permanent_claim = ROOT
					}
				}
				160 = {
					if = {
						limit = {
							NOT = { is_core = ROOT }
							NOT = { is_permanent_claim = ROOT }
						}
						add_permanent_claim = ROOT
					}
				}
				157 = {
					if = {
						limit = {
							NOT = { is_core = ROOT }
							NOT = { is_permanent_claim = ROOT }
						}
						add_permanent_claim = ROOT
					}
				}
			}
        }
	}
    vn_bra_duchy_of_cleves = {
        icon = mission_diplomatic_relation
		required_missions = { vn_bra_claims_in_magdeburg }
		provinces_to_highlight = {
			OR = {
				owned_by = KLE
				province_id = 2501
				province_id = 162
				province_id = 4110
				province_id = 160
				province_id = 157
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
        trigger = {
			OR = {
				senior_union_with = KLE
				AND = {
					2501 = { country_or_non_sovereign_subject_holds = ROOT }
					162 = { country_or_non_sovereign_subject_holds = ROOT }
					4110 = { country_or_non_sovereign_subject_holds = ROOT }
					160 = { country_or_non_sovereign_subject_holds = ROOT }
					157 = { country_or_non_sovereign_subject_holds = ROOT }
				}
			}
        }
        effect = {
			add_power_projection = {
				type = mission_rewards_power_projection
				amount = 25
			}
			custom_tooltip = " "
            rhenish_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_claim = ROOT
            }
			custom_tooltip = " "
			add_country_modifier = {
				name = bra_duchy_of_cleves_mission
				duration = 9125
			}
        }
	}
}

vn_bra_missions_slot_5_a = {
    slot = 10
    generic = no
    ai = yes
    potential = {
        OR = {
			tag = BRA
			AND = {
				tag = SDL
				NOT = { started_in = 1147.8.1 }
			}
		}
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_bra_curb_robber_baronry = {
        icon = mission_landsknecht_soldier
        required_missions = {  }
		provinces_to_highlight = { }
        trigger = {
			num_of_cities = 25
			OR = {
				NOT = { has_estate = estate_nobles }
				AND = {
					estate_loyalty = {
						estate = estate_nobles 
						loyalty = 60 
					}
					num_of_estate_privileges = {
						estate = estate_nobles
						value = 4
					}
					num_of_estate_agendas_completed = {
						estate = estate_nobles
						value = 3
					}
				}
				AND = {
					OR = {
						crown_land_share = 40
						has_reform = blackmail_nobility_reform
					}
					NOT = { 
						num_of_estate_privileges = {
							estate = estate_nobles 
							value = 3 
						}
					}
					NOT = {
						estate_influence = {
							estate = estate_nobles 
							influence = 50 
						}
					}
				}
			}
        }
        effect = {
			complex_dynamic_effect = {
				first_custom_tooltip = vn_bra_curb_robber_baronry.tt
				first_limit = "
					OR = {
						NOT = { has_estate = estate_nobles }
						AND = {
							OR = {
								crown_land_share = 50
								has_reform = blackmail_nobility_reform
							}
							NOT = { 
								num_of_estate_privileges = {
									estate = estate_nobles 
									value = 3 
								}
							}
							NOT = {
								estate_influence = {
									estate = estate_nobles 
									influence = 50 
								}
							}
						}
					}
				"
				first_effect = "
					add_country_modifier = {
						name = bra_curb_robber_baronry_mission
						duration = 9125
					}
				"
				second_custom_tooltip = vn_bra_curb_robber_baronry.tt2
				second_limit = "
					estate_loyalty = {
						estate = estate_nobles 
						loyalty = 60 
					}
					num_of_estate_privileges = {
						estate = estate_nobles
						value = 4
					}
					num_of_estate_agendas_completed = {
						estate = estate_nobles
						value = 3
					}
				"
				second_effect = "
					add_country_modifier = {
						name = bra_curb_robber_baronry_mission2
						duration = 9125
					}
				"
			}
        }
		ai_weight = {
			factor = 500
		}
	}
    vn_bra_centralize_mark = {
        icon = rein_in_the_nobles
        required_missions = { 
			vn_bra_curb_robber_baronry
			vn_bra_electorate
		}
		provinces_to_highlight = {
			owned_by = ROOT
			has_courthouse_building_trigger = no
		}
        trigger = {
			stability = 3
			reform_level = 3
			NOT = { corruption = 1 } 
			NOT = { average_autonomy_above_min = 10 }
			num_of_owned_provinces_with = {
				value = 10
				has_courthouse_building_trigger = yes
			}
        }
        effect = {
			if = { 
				limit = { 
					has_dlc = "Domination"
					has_estate = estate_nobles
				}
				unlock_estate_privilege = {
					estate_privilege = estate_nobles_consolidated_noble_contracts
				}
				custom_tooltip = " "
			}
			if = {
				limit = { 
					has_dlc = "Rights of Man" 
					NOT = { num_of_ruler_traits = { amount = 3 } }
				}
				add_ruler_personality = reformist_personality
			}
			else = {
				add_adm_power = 50
			}
			custom_tooltip = " "
			add_country_modifier = {
				name = bra_centralize_mark_mission
				duration = 9125
			}
        }
		ai_weight = {
			factor = 500
		}
	}
}

vn_bra_missions_slot_5_b = {
    slot = 10
    generic = no
    ai = yes
    potential = {
        OR = {
			tag = BRA
			AND = {
				tag = BRA
				was_tag = SDL
			}
		}
        NOT = { map_setup = map_setup_random }
    }
	has_country_shield = yes
	
	vn_bra_dispositio_achillea = {
		icon = misison_uppsala_university
		position = 4
        required_missions = { vn_bra_centralize_mark }
		provinces_to_highlight = {
			province_id = 2197
			OR = {
				NOT = { country_or_non_sovereign_subject_holds = ROOT }
				has_education_building_trigger = no
				devastation = 1
				unrest = 1
			}
		}
        trigger = {
			is_lacking_institutions = no
			2197 = {
				country_or_non_sovereign_subject_holds = ROOT
				has_education_building_trigger = yes
				NOT = { devastation = 1 } 
				NOT = { unrest = 1 }
			}
        }
        effect = {
			change_innovativeness = 3
			add_country_modifier = {
				name = "bra_dispositio_achillea_mission"
				duration = -1
			}
        }
	} 
}

vn_bra_missions_slot_5_c = {
    slot = 10
    generic = no
    ai = yes
    potential = {
        OR = {
			tag = BRA
			AND = {
				tag = BRA
				was_tag = SDL
			}
		}
        NOT = { map_setup = map_setup_random }
    }
	has_country_shield = yes
	
    vn_bra_catholic_or_protestant = {
        icon = mission_luther_theses
        position = 5
        required_missions = {  }
        trigger = {
			custom_trigger_tooltip = {
				tooltip = emp_bav_be_good_at_religion_reformation_started_tooltip
				had_global_flag = {
					flag = reformation_started
					days = 7300
				}
			}
            OR = {
				AND = {
					uses_church_aspects = yes
					church_power = 100
				}
				AND = {
					uses_fervor = yes
					fervor = 50
				}
                AND = {
					uses_papacy = yes
					papal_influence = 100
				}
			}
			religious_unity = 0.75
        }
        effect = {
			add_country_modifier = {
				name = "bra_catholic_or_protestant_mission"
				duration = 9125
			}
        }
    }
    vn_bra_fate_of_bishoprics = {
        icon = religious_resolution
        required_missions = { vn_bra_catholic_or_protestant }
		position = 7
        trigger = {
			OR = {
				NOT = { has_estate = estate_church }
				AND = {
					uses_papacy = yes
					NOT = { has_reform = separate_clergy_from_state_affairs_reform }
					NOT = { has_reform = curtail_clergy_power_reform }
					num_of_estate_privileges = {
						estate = estate_church
						value = 4
					}
				}
				AND = {
					OR = {
						uses_church_aspects = yes
						uses_fervor = yes
					}
					OR = {
						has_reform = separate_clergy_from_state_affairs_reform
						has_reform = curtail_clergy_power_reform
					}
					crown_land_share = estate_church
				}
			}
        }
        effect = {
			complex_dynamic_effect = {
				first_custom_tooltip = vn_bra_fate_of_bishoprics.tt
				first_limit = "
					has_estate = estate_church
					OR = {
						uses_church_aspects = yes
						uses_fervor = yes
					}
					OR = {
						has_reform = separate_clergy_from_state_affairs_reform
						has_reform = curtail_clergy_power_reform
					}
				"
				first_effect = "
					add_years_of_income = 1
					add_country_modifier = {
						name = bra_fate_of_bishoprics_mission
						duration = -1
					}
				"
				second_custom_tooltip = vn_bra_fate_of_bishoprics.tt2
				second_limit = "
					has_estate = estate_church
					uses_papacy = yes
					num_of_estate_privileges = {
						estate = estate_church
						value = 4
					}
					NOT = { has_reform = separate_clergy_from_state_affairs_reform }
					NOT = { has_reform = curtail_clergy_power_reform }
				"
				second_effect = "
					add_estate_church_loyalty_effect = yes
					add_country_modifier = {
						name = bra_fate_of_bishoprics_mission2
						duration = -1
					}
				"
				third_custom_tooltip = vn_bra_fate_of_bishoprics.tt3
				third_limit = "
					NOT = { has_estate = estate_church }
				"
				third_effect = "
					add_years_of_income = 0.5
					add_adm_power = 25
					add_dip_power = 25
					add_mil_power = 25
					add_religious_influence_effect_small = yes
				"
			}
        }
	}
}